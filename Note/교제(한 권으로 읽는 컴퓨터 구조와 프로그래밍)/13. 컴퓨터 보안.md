## 보안과 프라이버시 개요

### 위협 모델

- 시스템에 잠재적 위협을 식별하고 분석하는 방법
- **자산(Asset)**과  자산을 노리는 **공격자(Threat)**, 공격에 이용될 수 있는 **취약점(Vulnerability)**을 파악

### 신뢰(trust)

- **의도적(deliberate)**: 악의를 가지고 고의적으로 시스템을 해침
- **무능(incompetent)**: 실수 또는 지식 부족으로 의도치 않게 사고 유발
- **부정직(disingenuous)**: 권한을 남용하여 이익을 추구(클렙토그래피, kleptography)

**개방성(openness)** 정책을 통해 **투명성(transparency)**이 확보되면, **수천 개의 눈 원리(thousands of eyeballs principle)**에 따라 많은 사람의 검토로 보안 취약점이나 오류를 더 효과적으로 발견 할 수 있다.

### 물리적 보안

- **공격 표면(attack surface)**: 공격자가 시스템에 접근하거나 빼낼 수 있는 모든 진입점
- **권한 부여(authorization)**: 특정 자산에 접근하거나 작업을 허가하는 과정
- **백-도어(Back-door)**: 정상적인 인증 절차를 거치지 않고 시스템에 접근할 수 있도록 만든 비밀 통로입니다.
- **권한 수준(privilege level)**: 사용자나 프로그램이 시스템 내에서 가질 수 있는 접근 권한의 계층

### 통신 보안

- **인증(authentication)**: 통신하는 상대방의 **신원을 검증**하는 절차
- **진본성(authenticity)**: 데이터가 위조되거나 변조되지 않았음을 확인하는 속성
- **중간자 공격(man-in-the-middle attack)**: 두 통신 당사자 사이에 공격자가 몰래 끼어들어 통신 내용을 엿듣거나 조작하는 공격

### 모던 타임즈

- **서비스 거부 공격(DoS, denial of service)**: 특정 서버나 네트워크에 과도한 트래픽을 줘서 서비스 마비 시킴
- **분산 서비스 거부 공격(DDoS distributed, denial of service)**: 여러 곳에서 서비스 거부 공격 시행
- **프록시(Proxy)**: 클라이언트와 서버 사이 대리(proxy)역할을 하는 중개 서버

### 메타데이터(metadata)

- 데이터에 대한 데이터(data about data)
- 데이터의 존재, 위치, 어떻게 만들고 특징을 가지고 있는지 설명해주는 정보

## 크립토그래피

암호학(cryptography)은 평문을 암호화(encrypt)하고 복호화(decrypt)하여 비밀을 유지하는 모든 체계

### 스테가노그래피(steganography)

메시지의 존재 자체를 숨기는 기술

- **개 호루라기 마케팅(dog-whistle marketing)**: 특정 집단에게만 이해되는 은밀한 메시지를 보내면서, 다른 일반 대중에게는 무해하고 평범하게 들리도록 하는 소통 전략

### 치환 암호

메시지의 문자나 단어를 다른 문자나 단어로 대체하는 방식 

- **대칭(sysmmetric) 암호**: 암호화와 복호화에 같은 암호를 사용하는 것 . 중간자 공격에 취약할 수 있다.

### 전치 암호

메시지의 문자나 단어 순서를 바꿔 암호문을 만드는 방식

- **스키테일(scytale)**: 원통 막대에 띠를 두르고 메시지를 쓰는 고대 그리스 스파르타의 전치 암호

### 공개키 암호 (public-key cryptography)

비대칭 암호화 시스템. 

- **공개키(public key)**: 암호화는 할 수 있지만 복호화 불가능한, 공개되어 있는 키
    - **트랩도어 함수(trapdoor function)**: 한 방향으로 계산하기 쉽지만, 역방향으로 계산하기 매우 어려운 함수
    - **RSA**: 공개키 암호화 알고리즘
- **비밀키(private key)**: 공개키로 암호화한 데이터를 복호화 할 수 있는, 소유자만이 가질수 있는 키
- **세션 키(sesstion key)**: 비대칭 암호화는 계산 비용이 많이 들기 때문에, 일회성 통신을 위해 사용하는 임시적 대칭 키
    - **디피-헬만 키 교환 (DHKE, Diffie-Hellman Key Exchange)**: 암호화되지 않은 공용 통신 채널에서  세션키를 만드는 알고리즘

### 블록체인

- 분산된 컴퓨터 네트워크에 거래 기록을 저장하는 디지털 공개 장부
- 거래 기록(block)이 담긴 블록들이 연결(chain)한 형태
- **체인(Chain)**
    - 블록은 생성될 때 이전 블록의 해시값(hash value)을 포함
    - 이 해시값은 블록의 내용이 조금이라도 바뀌면 전혀 다른 값이 됨
    - 이 해시값으로블록들이 암호학적으로 안전하게 연결

# 보안을 위한 소프트웨어 예방 조치

### 올바른 대상을 보호하라

모든 대상을 동일하게 보호하는 시도는 좋은 생각이 아니다

### 로직은 세 번 체크하라

로직에 있는 오류로 인한 공격을 해결하기 위해 다른 사람과 함께 크게 코드를 읽는 것은 좋은 방법 중 하나

### 오류를 검사하라

오류 코드나 경고 보고를 소홀히 하지 말 것

### 공격 표면을 최소화하라

코드를 가능한 한 간단하게 유지해서 공격 표면을 줄이는 것이 좋은 방법

### 경계 내부에 머물러라

- 버퍼 오버플로우는 메모리 경계를 검사하지 않고 다른 데이터를 덮어쓰는 문제
- 제공받은 숫자가 변수에서 저장할 수 있는 범위 안에 속하는지 가정하지 말고 검사할 것
- 메모리 경계 안에 머무는 것은 중요
- 입력이 인터럽트 핸들러가 처리할 수 있는 속도보다 빨리 들어와도 프로그램이 제대로 처리할 수 있게 할 것

### 좋은 난수를 생성하기는 힘들다

보안이 좋은 난수에 의존한다면, 난수 생성하는 시스템을 반드시 이해해야 한다

- 선형 피드백 시프트 레지스터(LFSR, liner feedback shift register)의 의사 **난수 생성기(PRNG, pseudorandom number)**
    - 실제로는 결정론적이기 때문에 가짜 난수
    - 난수가 주기적으로 반복되기 때문에, 다음 난수 예측 가능
    - **시드(seed)**: 난수 생성기에 설정되는 최초의 숫자
- **엔트로피(entropy)**: 열역학에서 우주가 무질서로 나가려는 경향을 의미
    - Cloudflare의 웹서버는 라바 램프(Lava lamp)를 웹캠으로 찍어 엔트로피 소스로 사용
    - 인텔은 칩에서 발생하는 열 잡음(thermal noise)을 엔트로피 소스로 활용해 하드웨어 난수 생성기 개발

### 네 코드를 알라

- 오픈 소스가 더 나을 수 있다
- 서드파티 코드를 쓸드를 쓸 때 실제 사용한 부분 비율을 주시할 것
- 출시 전에 디버깅 코드와 디폴트 패스웨드를 꼭 제거할 것

### 극단적인 영리함은 여러분의 적이다

이상하고 영리한 기능은 피할 것. 특히, 더는 지원하지 않는 기능을 의존하지 말 것

### 눈에 보이는 것을 이해하라

메타데이터나 부작용에 주의를 기울일 것 

- **사이드 채널 공격(size-channel attack)**: 프로그램이 실행될 때 발생하는 물리적 현상을 분석하여 비밀 정보 획득
- **타이밍 공격**: 시간 차이를 이용해 비밀 정보를 유추

### 과다 수집하지 마라

정말 필요한 경우가 아니라면 안전하게 유지해야 할 대상을 만들지 말 것. 

### 모아두지 마라

가능한 빨리 민감한 정보를 없앨 것

### 동적 할당은 여러분의 친구가 아니다

- 데이터가 불필요해졌으면 지울 것
- 보안이 필수적인 경우 realloc을 사용하지 말 것(realloc 함수는 메모리 블록을 확장할 때, 새로운 공간을 0으로 초기화하지 않을 수 있음)
- malloc으로 새 메모리를 할당하고 이전 데이터를 새 블록에 복사한 다음, 민감한 데이터를 덮어써 free로 해제할 것

### 가비지 컬렉션도 여러분의 친구가 아니다

- 가비지 컬렉션 시스템은 개발자가 특정 데이터를 즉시 메모리에서 강제로 지우도록 명령할 수 있는 방법이 없다
- SSD는 특정 메모리 셀이 빨리 마모되는 것을 막기 위해, 데이터 분산 저장하는 **부하 평탄화(load leveling)**를 하기 때문에 어떤 데이터를 덮어써도 무리적 저장소에 계속 남아있을 수 있다

### 코드 역할을 하는 데이터

사용자의 입력 데이터를 코드의 일부로 인식하고 실행함으로써 발생하는 보안 취약점에 유의할 것 

- ex. SQL 주입(SQL injection)
